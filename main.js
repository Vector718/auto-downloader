import fetch from "node-fetch";
import fs from 'fs';
import path from 'path';

const songs = [
  {
    _id: "64a0bba8ad0166d0928dcf3f",
    Title: "AISE KYUN | Ghazal Version",
    SongHash: "bc45191ba4f3c367f718b398ca90d791",
    Artist: "Mohit Roger",
    ThumbnailHash: "bec7b8944f5213876fd1565520a8bdfb",
    createdAt: "2023-07-01T23:50:00.464Z",
    updatedAt: "2023-07-01T23:50:00.464Z",
    __v: 0,
  },
  {
    _id: "649e60c706e6fea623d9b022",
    Title: "Suzume",
    SongHash: "2e847216138dffdfa14cb2770765a181",
    Artist: "Toaka",
    ThumbnailHash: "6338e71d6429303a492c0476846a4979",
    createdAt: "2023-06-30T04:57:43.526Z",
    updatedAt: "2023-06-30T04:57:43.526Z",
    __v: 0,
  },
  {
    _id: "649e724c39fecce79ca0c724",
    Title: "Roads Untravelled - Need For Speed Original Soundtrack",
    SongHash: "f2ffff63a87aa8f249dadafc65639bac",
    Artist: "Linkin Park",
    ThumbnailHash: "83ed33755200ee1a583df40d194e6270",
    createdAt: "2023-06-30T06:12:28.484Z",
    updatedAt: "2023-06-30T06:12:28.484Z",
    __v: 0,
  },
  {
    _id: "64a657d2601aa93d96109048",
    Title: "Sweater Weather",
    SongHash: "be29c7a2d939675a5acd59128ac69c77",
    Artist: "The Neighborhood",
    ThumbnailHash: "3811802fcd8b4a0762d828f50da9f05f",
    createdAt: "2023-07-06T05:57:38.933Z",
    updatedAt: "2023-07-06T05:57:38.933Z",
    __v: 0,
  },
  {
    _id: "649e6bf539fecce79ca0c6f5",
    Title: "Venom",
    SongHash: "83bb70da1338cc8fd9831ade242efc9b",
    Artist: "Eminem",
    ThumbnailHash: "f054752fc43c8bfbb17d7f32beb60f83",
    createdAt: "2023-06-30T05:45:25.688Z",
    updatedAt: "2023-06-30T05:45:25.693Z",
    __v: 0,
  },
  {
    _id: "64a0aedbc3cd315a712d5a2f",
    Title: "Baaraat",
    SongHash: "29f13dfd29eafbfe508c4773bd5f39b9",
    Artist: "Ritviz,Nucleya",
    ThumbnailHash: "741bf3770861659ac378e1f43afcb317",
    createdAt: "2023-07-01T22:55:23.894Z",
    updatedAt: "2023-07-01T22:55:23.894Z",
    __v: 0,
  },
  {
    _id: "649ec4adff1d40baba7fcada",
    Title: "Heat Waves",
    SongHash: "1358af93331cdf9c95ad4ba3b9988dd6",
    Artist: "Glass Animals",
    ThumbnailHash: "03620167bbb03dc947cb9e565c057766",
    createdAt: "2023-06-30T12:03:57.287Z",
    updatedAt: "2023-06-30T12:03:57.287Z",
    __v: 0,
  },
  {
    _id: "64a65695601aa93d9610903b",
    Title: "lalala",
    SongHash: "666147d593515aa81ce4b1a6e7cda2d0",
    Artist: "Y2k bbno$",
    ThumbnailHash: "238a0c2e4b9f46130be9f51318f14e2e",
    createdAt: "2023-07-06T05:52:21.842Z",
    updatedAt: "2023-07-06T05:52:21.842Z",
    __v: 0,
  },
  {
    _id: "649e6fca39fecce79ca0c715",
    Title: "Kho Gaye",
    SongHash: "1bbf7678098d7fc0167d3df4f2b8687f",
    Artist: "Taaruk Raina",
    ThumbnailHash: "ae003f882d11f3124fdedac2cca38d88",
    createdAt: "2023-06-30T06:01:46.574Z",
    updatedAt: "2023-06-30T06:01:46.574Z",
    __v: 0,
  },
  {
    _id: "649e71c139fecce79ca0c720",
    Title: "The NUMBER Song ",
    SongHash: "2582ed0284802395896f1601bc50911d",
    Artist: "Logan Paul,Franke",
    ThumbnailHash: "75cd94221a7f3e6ac76637d36c24eba9",
    createdAt: "2023-06-30T06:10:09.433Z",
    updatedAt: "2023-06-30T06:10:09.433Z",
    __v: 0,
  },
  {
    _id: "64a655fe601aa93d96109037",
    Title: "Us",
    SongHash: "a3812d91acb6be859a8c2e4cfd50fe89",
    Artist: "James Bay",
    ThumbnailHash: "d9166b2048b7394d8369dbc641a360c7",
    createdAt: "2023-07-06T05:49:50.239Z",
    updatedAt: "2023-07-06T05:49:50.239Z",
    __v: 0,
  },
  {
    _id: "649ec87cff1d40baba7fcae4",
    Title: "Collide x Like I'm gonna loose you",
    SongHash: "3f58df6a120afd4d9303d2fda1f9e23e",
    Artist: "Justin Skye, Tyga, Meghan Trainor ,Ed Sheeran",
    ThumbnailHash: "f553cf0789971e79f453e943db6591be",
    createdAt: "2023-06-30T12:20:12.758Z",
    updatedAt: "2023-06-30T12:20:12.758Z",
    __v: 0,
  },
  {
    _id: "649ed256a68033a6cb760b25",
    Title: "Nazm Nazm | Bareilly Ki Barfi",
    SongHash: "55e1bbe7601cbdfe8b820d2a0d38f602",
    Artist: "Arko",
    ThumbnailHash: "9089bf6a231106de6a05d8a72deebdee",
    createdAt: "2023-06-30T13:02:14.974Z",
    updatedAt: "2023-06-30T13:02:14.974Z",
    __v: 0,
  },
  {
    _id: "64a0b0e4c3cd315a712d5a3e",
    Title: "Ambarsariya",
    SongHash: "6199948d836d91ccbb7fcb9b71994bf6",
    Artist: "Sona Mohapatra",
    ThumbnailHash: "0eedb72880689023d004a5807cb0680e",
    createdAt: "2023-07-01T23:04:04.544Z",
    updatedAt: "2023-07-01T23:04:04.544Z",
    __v: 0,
  },
  {
    _id: "64a65366601aa93d9610901d",
    Title: "Into Your Arms",
    SongHash: "626371b319a15d71d839ffc0f1136445",
    Artist: "Ava Max",
    ThumbnailHash: "956d5ef69cae8d78f893b439cbdebc8b",
    createdAt: "2023-07-06T05:38:46.523Z",
    updatedAt: "2023-07-06T05:38:46.523Z",
    __v: 0,
  },
  {
    _id: "64a654d9601aa93d9610902d",
    Title: "Shotgun",
    SongHash: "ea6b6d2fb953a6ce25eb91f4e34613f6",
    Artist: "George Ezra",
    ThumbnailHash: "ed7acd14c7dff1de059c3a4575355f48",
    createdAt: "2023-07-06T05:44:57.760Z",
    updatedAt: "2023-07-06T05:44:57.760Z",
    __v: 0,
  },
  {
    _id: "64a653de601aa93d96109021",
    Title: "Six Feet Under",
    SongHash: "7d8bd0a95295f71bb5e6ce89e352c38b",
    Artist: "Billie Eilish",
    ThumbnailHash: "1405eef1855bb9b6a916c829338f3bc3",
    createdAt: "2023-07-06T05:40:46.007Z",
    updatedAt: "2023-07-06T05:40:46.008Z",
    __v: 0,
  },
  {
    _id: "649ec3c6ff1d40baba7fcad5",
    Title: "Отключаю телефон",
    SongHash: "5f6ab5551d419128d8f73ca98e4b3958",
    Artist: "INSTASAMKA",
    ThumbnailHash: "95920167e52e5378eba7d447775419e3",
    createdAt: "2023-06-30T12:00:06.320Z",
    updatedAt: "2023-06-30T12:00:06.320Z",
    __v: 0,
  },
  {
    _id: "64a0b40ec3cd315a712d5a49",
    Title: "No Cap",
    SongHash: "0d678682ab71ba4766fee73d25b805c5",
    Artist: "KR$NA",
    ThumbnailHash: "db7c11aef2d82fef8ca345c533b88ee3",
    createdAt: "2023-07-01T23:17:34.258Z",
    updatedAt: "2023-07-01T23:17:34.258Z",
    __v: 0,
  },
  {
    _id: "649ec190ff1d40baba7fcacc",
    Title: "Paradise",
    SongHash: "caad14cac68a63c86b74819a0baf562a",
    Artist: "Coldplay",
    ThumbnailHash: "d386aa43a7341f7fd045a328c046bf0f",
    createdAt: "2023-06-30T11:50:40.622Z",
    updatedAt: "2023-06-30T11:50:40.622Z",
    __v: 0,
  },
  {
    _id: "64a65326601aa93d96109019",
    Title: "All Time Low",
    SongHash: "25114c83b25536d292d63caeba976e54",
    Artist: "Chymes",
    ThumbnailHash: "59680a4cbfffae683be798efff3dcaac",
    createdAt: "2023-07-06T05:37:42.174Z",
    updatedAt: "2023-07-06T05:37:42.175Z",
    __v: 0,
  },
  {
    _id: "64a6541e601aa93d96109025",
    Title: "Hold On",
    SongHash: "f5bb1f0161296c236df007cc4594c800",
    Artist: "Chord Overstreet",
    ThumbnailHash: "4180f478b4030a237363eeb9030dd5ac",
    createdAt: "2023-07-06T05:41:50.618Z",
    updatedAt: "2023-07-06T05:41:50.618Z",
    __v: 0,
  },
  {
    _id: "64a655bc601aa93d96109032",
    Title: "As It Was",
    SongHash: "7e6727d34f556e3ab4a0f668655245f1",
    Artist: "Harry Styles",
    ThumbnailHash: "25e1bb44409ee971aed8395cc6daf4f8",
    createdAt: "2023-07-06T05:48:44.671Z",
    updatedAt: "2023-07-06T05:48:44.671Z",
    __v: 0,
  },
  {
    _id: "649ec30cff1d40baba7fcad1",
    Title: "Without Me",
    SongHash: "d14ecf8eba596e7dde79e08964506670",
    Artist: "Halsey",
    ThumbnailHash: "b8702ff879c7fc50a5da2f2cac21bc14",
    createdAt: "2023-06-30T11:57:00.813Z",
    updatedAt: "2023-06-30T11:57:00.813Z",
    __v: 0,
  },
  {
    _id: "64a6592a601aa93d96109054",
    Title: "Thumbs",
    SongHash: "cf9ac86a711936073409e2933bbf0152",
    Artist: "Sabrina Carpenter",
    ThumbnailHash: "64bd92372dbcd344f8cf1e1a78773282",
    createdAt: "2023-07-06T06:03:22.155Z",
    updatedAt: "2023-07-06T06:03:22.155Z",
    __v: 0,
  },
  {
    _id: "649ece9c59a364df36c506bd",
    Title: "Daayre",
    SongHash: "67087b39cd380c74894be13277ba9693",
    Artist: "Arijit Singh,Pritam",
    ThumbnailHash: "7dd396ba530f9795634f0e38b3fe8384",
    createdAt: "2023-06-30T12:46:20.492Z",
    updatedAt: "2023-06-30T12:46:20.492Z",
    __v: 0,
  },
  {
    _id: "64a658c0601aa93d96109050",
    Title: "All I Want",
    SongHash: "5767b9fdeb478abd65e1b57f4ddb9a91",
    Artist: "Kodaline",
    ThumbnailHash: "f0e82f2a4ccc513446f77c7dd6519c57",
    createdAt: "2023-07-06T06:01:36.617Z",
    updatedAt: "2023-07-06T06:01:36.617Z",
    __v: 0,
  },
  {
    _id: "64a654a5601aa93d96109029",
    Title: "Arcade",
    SongHash: "a4fcc2d900d3cb42fa3ae3e456f902e5",
    Artist: "Duncan Laurence",
    ThumbnailHash: "4d857df8053b1e5d610ea327c4a2f5c1",
    createdAt: "2023-07-06T05:44:05.371Z",
    updatedAt: "2023-07-06T05:44:05.371Z",
    __v: 0,
  },
  {
    _id: "649ebf24ff1d40baba7fcac6",
    Title: "Hymn for the Weekend",
    SongHash: "53f883cde56252c38ceb0ce0ce995838",
    Artist: "Coldplay",
    ThumbnailHash: "5d7a23f2a5426557d2f5aeea7d370dd7",
    createdAt: "2023-06-30T11:40:20.398Z",
    updatedAt: "2023-06-30T11:40:20.398Z",
    __v: 0,
  },
  {
    _id: "649ed66a7716347cca3c52ec",
    Title: "Tum Jo Aaye | Once upon a time in Mumbai",
    SongHash: "808e19704e9c52c3aee0b19be028a72d",
    Artist: "Rahat Fateh Ali Khan,Tulsi Kumar, Pritam",
    ThumbnailHash: "ddfb080e78371be9af645129e8d980d8",
    createdAt: "2023-06-30T13:19:38.705Z",
    updatedAt: "2023-06-30T13:19:38.705Z",
    __v: 0,
  },
  {
    _id: "649ec627ff1d40baba7fcadf",
    Title: "Double Take",
    SongHash: "2210bac6d003ab90973577331de3b4c3",
    Artist: "Dhruv",
    ThumbnailHash: "8684869ae135676f3e28c0c02ef0e021",
    createdAt: "2023-06-30T12:10:15.771Z",
    updatedAt: "2023-06-30T12:10:15.772Z",
    __v: 0,
  },
  {
    _id: "649eb91eff1d40baba7fcac1",
    Title: "Greaze Mode ",
    SongHash: "1184de3815171950b7d7f70895cf5d08",
    Artist: "Skepta ft. Nafe Smallz",
    ThumbnailHash: "e792181589ab5cc69c7b6610bb56c233",
    createdAt: "2023-06-30T11:14:38.230Z",
    updatedAt: "2023-06-30T11:14:38.231Z",
    __v: 0,
  },
  {
    _id: "649e6d0439fecce79ca0c700",
    Title: "Still D.R.E",
    SongHash: "590eec5a30da68dadf5b1d96cc0240e8",
    Artist: "Dr. Dre , Snoop Dogg",
    ThumbnailHash: "9b0092453f3afa183930a1bec168b5f2",
    createdAt: "2023-06-30T05:49:56.753Z",
    updatedAt: "2023-06-30T05:49:56.753Z",
    __v: 0,
  },
  {
    _id: "649e70c939fecce79ca0c71a",
    Title: "Count Me Out",
    SongHash: "b3ffe46e350dea215bd0cdc08fce64f8",
    Artist: "Kendrick Lamar",
    ThumbnailHash: "2d5a6a1cd2328d5d49c393b9cbc13e40",
    createdAt: "2023-06-30T06:06:01.444Z",
    updatedAt: "2023-06-30T06:06:01.444Z",
    __v: 0,
  },
  {
    _id: "64a427b15fd77991867e902e",
    Title: "Human",
    SongHash: "e351e516fc1a23eb3d1811e9b6e681c5",
    Artist: "Rag'n'Bone Man",
    ThumbnailHash: "fd7fbbef53db8f19cce945fb806c9131",
    createdAt: "2023-07-04T14:07:45.848Z",
    updatedAt: "2023-07-04T14:07:45.848Z",
    __v: 0,
  },
  {
    _id: "64a65859601aa93d9610904c",
    Title: "Older",
    SongHash: "68aa052742f03e202f7013fdbc7185f8",
    Artist: "Sasha Alex Sloan",
    ThumbnailHash: "0a98600bc5037d22536b0bdb36accf84",
    createdAt: "2023-07-06T05:59:53.003Z",
    updatedAt: "2023-07-06T05:59:53.003Z",
    __v: 0,
  },
  {
    _id: "64a297189317b0c71e4282ee",
    Title: "Money Trees",
    SongHash: "b1eba0f8e21c71c889e81b9f34f1e514",
    Artist: "Kendrick Lamar , Jay Rock , Anna Wise",
    ThumbnailHash: "Pending...",
    createdAt: "2023-07-03T09:38:32.678Z",
    updatedAt: "2023-07-03T09:38:32.678Z",
    __v: 0,
  },
  {
    _id: "64a296b69317b0c71e4282ec",
    Title: "Money Trees",
    SongHash: "b34d21f157d3827efbda5ccde2cb4647",
    Artist: "Kendrick Lamar , Jay Rock , Anna Wise",
    ThumbnailHash: "2a374c4b81dabe60be0a74ce890409de",
    createdAt: "2023-07-03T09:36:54.927Z",
    updatedAt: "2023-07-03T09:36:54.927Z",
    __v: 0,
  },
  {
    _id: "64a0b6adc3cd315a712d5a58",
    Title: "Elevated",
    SongHash: "b1542de3e12f7ac3b516ca8edf6e7388",
    Artist: "SHUBH",
    ThumbnailHash: "c9966c167c81ba9e5382ad1b048543fa",
    createdAt: "2023-07-01T23:28:45.121Z",
    updatedAt: "2023-07-01T23:28:45.121Z",
    __v: 0,
  },
  {
    _id: "64a65774601aa93d96109043",
    Title: "Sunflower",
    SongHash: "7b4fe002847bc714a20a28540e1146e4",
    Artist: "Post Malone",
    ThumbnailHash: "9ae3f75f7764e79b9052073dccb84ae2",
    createdAt: "2023-07-06T05:56:04.765Z",
    updatedAt: "2023-07-06T05:56:04.765Z",
    __v: 0,
  },
  {
    _id: "64a250a980c1293effabdb9d",
    Title: "Count Me Out - Extended ",
    SongHash: "68138ee1b9f20ab528ec82a7825e6f97",
    Artist: "Kendrick Lamar",
    ThumbnailHash: "5355f7722ed90f667e7c2a6b3226eddd",
    createdAt: "2023-07-03T04:38:01.483Z",
    updatedAt: "2023-07-03T04:38:01.484Z",
    __v: 0,
  },
  {
    _id: "64a65a9f601aa93d96109065",
    Title: "Habits Stay High",
    SongHash: "dbd3223c11f7c918bde737523fa912f1",
    Artist: "Tove Lo",
    ThumbnailHash: "51256e576791e3c9b94a9eb72dc6c6a8",
    createdAt: "2023-07-06T06:09:35.211Z",
    updatedAt: "2023-07-06T06:09:35.211Z",
    __v: 0,
  },
  {
    _id: "649e6dc939fecce79ca0c708",
    Title: "New Rules",
    SongHash: "f3f8bd77411e8d168b7e9731d9c487c0",
    Artist: "Dua Lipa",
    ThumbnailHash: "32a6d832fa40408b7055c50a93eda301",
    createdAt: "2023-06-30T05:53:13.941Z",
    updatedAt: "2023-06-30T05:53:13.942Z",
    __v: 0,
  },
  {
    _id: "64a1a67534bf237cd5444f1d",
    Title: "Rangabati ",
    SongHash: "4772e69fb9326cf491ff5773c9faebca",
    Artist: "Rituraj Mohanty",
    ThumbnailHash: "a5cd356db473195ced6d1a9aef61084f",
    createdAt: "2023-07-02T16:31:49.692Z",
    updatedAt: "2023-07-02T16:31:49.692Z",
    __v: 0,
  },
  {
    _id: "64a0b589c3cd315a712d5a4f",
    Title: "Ud-daa Punjab",
    SongHash: "814a9871090ee593301df47a1890da4f",
    Artist: "Vishal Dadlani , Amit Trivedi",
    ThumbnailHash: "27d60c6520c33d3666afa04cd51a060b",
    createdAt: "2023-07-01T23:23:53.161Z",
    updatedAt: "2023-07-01T23:23:53.161Z",
    __v: 0,
  },
  {
    _id: "64a0afecc3cd315a712d5a39",
    Title: "Sau Tarah Ke",
    SongHash: "615597932fd3854d7edb8fa18a803a27",
    Artist: "Jonita Gandhi , Amit Mishra",
    ThumbnailHash: "dc6314e7c12cc48270010d34e439fe73",
    createdAt: "2023-07-01T22:59:56.516Z",
    updatedAt: "2023-07-01T22:59:56.516Z",
    __v: 0,
  },
  {
    _id: "64a656c3601aa93d9610903f",
    Title: "LSD Thunderclouds",
    SongHash: "d3234908f7995753d1addf539c184d68",
    Artist: "Sia",
    ThumbnailHash: "27d1bf7a0f3ec72a3d834a210206b8ea",
    createdAt: "2023-07-06T05:53:07.318Z",
    updatedAt: "2023-07-06T05:53:07.318Z",
    __v: 0,
  },
  {
    _id: "649e6edd39fecce79ca0c710",
    Title: "The Real Slim Shady",
    SongHash: "17cfba7e0314346f2b7c3eef59824d31",
    Artist: "Eminem",
    ThumbnailHash: "80f1be2d09dbccb14235bc63302a3e5a",
    createdAt: "2023-06-30T05:57:49.640Z",
    updatedAt: "2023-06-30T05:57:49.640Z",
    __v: 0,
  },
  {
    _id: "649ecae9ff1d40baba7fcaea",
    Title: "Yevevo",
    SongHash: "0aece76a0f951bf5e2d47cc22ab24350",
    Artist: "Akhil Akkineni, Jonita Gandhi",
    ThumbnailHash: "58e2669dbc9294cd4741fb9cea46ba8d",
    createdAt: "2023-06-30T12:30:33.509Z",
    updatedAt: "2023-06-30T12:30:33.509Z",
    __v: 0,
  },
  {
    _id: "64a13b6949d41533e02dfb12",
    Title: "Greater than One",
    SongHash: "870b9ef8cb9d156a668c353650bada59",
    Artist: "Ericdoa ,VALORANT",
    ThumbnailHash: "4d10aadcc9481d5555ebf3fb4f02d137",
    createdAt: "2023-07-02T08:55:05.087Z",
    updatedAt: "2023-07-02T08:55:05.088Z",
    __v: 0,
  },
  {
    _id: "64a0fb9311c029c5504f15e8",
    Title: "DVRST",
    SongHash: "4dfa2ae7f219b5ac6249e7fa5a8fd5c0",
    Artist: "Komlaksh Sharma",
    ThumbnailHash: "3d9d65e8bad934cac7cd04f145e891c4",
    createdAt: "2023-07-02T04:22:43.489Z",
    updatedAt: "2023-07-02T04:22:43.490Z",
    __v: 0,
  },
  {
    _id: "64a0b7a9c3cd315a712d5a5d",
    Title: "Da Da Dasse",
    SongHash: "f98f03fd1c8c3273c2acef44c22e0d19",
    Artist: "Kanika Kapoor, Babu Haabi",
    ThumbnailHash: "0e2eb9c0ceac70e42b5df2c3ff30a071",
    createdAt: "2023-07-01T23:32:57.930Z",
    updatedAt: "2023-07-01T23:32:57.930Z",
    __v: 0,
  },
  {
    _id: "64a0ae36c3cd315a712d5a2b",
    Title: "Cold ",
    SongHash: "d3ac5e424a53ce2cf2d2125e8988f3f5",
    Artist: "Maroon 5 ft. Future",
    ThumbnailHash: "ad4d295a8bbba80510de655a73dfdb15",
    createdAt: "2023-07-01T22:52:38.574Z",
    updatedAt: "2023-07-01T22:52:38.574Z",
    __v: 0,
  },
  {
    _id: "64a65965601aa93d96109058",
    Title: "Mr. Sandman",
    SongHash: "529f99180802e142c333769a66551438",
    Artist: "SYML",
    ThumbnailHash: "5f8511e579a11b5f111fc8c62f25b928",
    createdAt: "2023-07-06T06:04:21.750Z",
    updatedAt: "2023-07-06T06:04:21.751Z",
    __v: 0,
  },
  {
    _id: "649ecce659a364df36c506b7",
    Title: "Vibranium",
    SongHash: "3a15e0c739e4a1e781908a7d213b8bb2",
    Artist: "Chunkz,Neji",
    ThumbnailHash: "27dc54103cc44bbe68efc3bd940d6492",
    createdAt: "2023-06-30T12:39:02.645Z",
    updatedAt: "2023-06-30T12:39:02.645Z",
    __v: 0,
  },
  {
    _id: "64a0ad3ec3cd315a712d5a23",
    Title: "Besharam Rang",
    SongHash: "ded19f9ebe2ba255bed3fdb0f14054f2",
    Artist: "Shilpa Rao, Caralisa Monteiro, Vishal and Sheykhar",
    ThumbnailHash: "91bb559cee4d3c6d69069b5d8b74f846",
    createdAt: "2023-07-01T22:48:30.359Z",
    updatedAt: "2023-07-01T22:48:30.359Z",
    __v: 0,
  },
  {
    _id: "64a659f8601aa93d9610905c",
    Title: "Love Your Voice",
    SongHash: "2810847160150176c9c70356679a6f55",
    Artist: "JONY",
    ThumbnailHash: "f3a256c2cb44c91616870501d1e8662a",
    createdAt: "2023-07-06T06:06:48.168Z",
    updatedAt: "2023-07-06T06:06:48.168Z",
    __v: 0,
  },
  {
    _id: "64a0b343c3cd315a712d5a43",
    Title: "Bandook Meri Laila",
    SongHash: "298868b4a73e19fb8e19c398781d7afa",
    Artist:
      "Ash King, Jigar Saraiya, Feat Raftaar. Introducing Sidharth Malhotra",
    ThumbnailHash: "d41a50fc0bdf6fa4a2d3181045f311fc",
    createdAt: "2023-07-01T23:14:11.790Z",
    updatedAt: "2023-07-01T23:14:11.790Z",
    __v: 0,
  },
  {
    _id: "64a65add601aa93d96109069",
    Title: "Mystery of Love",
    SongHash: "8225d67c8c816ad69d3f6a878a86804e",
    Artist: "Sufjan Stevens",
    ThumbnailHash: "671efbbfc44144f8a4cd9af2de76a956",
    createdAt: "2023-07-06T06:10:37.625Z",
    updatedAt: "2023-07-06T06:10:37.625Z",
    __v: 0,
  },
  {
    _id: "64a65a29601aa93d96109060",
    Title: "Raabta",
    SongHash: "8a3e3c6dfe49ccd941541b9dca87b67f",
    Artist: "Agent Vinod",
    ThumbnailHash: "a8bc1c21c7c5add3e52f613fdea10873",
    createdAt: "2023-07-06T06:07:37.802Z",
    updatedAt: "2023-07-06T06:07:37.802Z",
    __v: 0,
  },
  {
    _id: "649ecf3e59a364df36c506c3",
    Title: "Saware",
    SongHash: "96ebf0442527eddc4b024eb1abf64723",
    Artist: "Arijit Singh",
    ThumbnailHash: "27a89d64420f0e9f77d8d5723a69b460",
    createdAt: "2023-06-30T12:49:02.764Z",
    updatedAt: "2023-06-30T12:49:02.764Z",
    __v: 0,
  },
  {
    _id: "64aec4dcf5ee6bba558c0436",
    Title: "THndCLds",
    SongHash: "109d22daa0fa44c144564f62a2324dd1",
    Artist: "Kuch kuch",
    ThumbnailHash: "85a582e0dc30b6c3d9f80bdfc8d1efaf",
    createdAt: "2023-07-12T15:21:00.452Z",
    updatedAt: "2023-07-12T15:21:00.453Z",
    __v: 0,
  },
];

async function downloadMedia(url) {
  const response = await fetch(url);
  const fileData = await response.buffer();
  return fileData;
}


async function downloadAndStoreMedia(url, storagePath) {
    
    const mediaData = await downloadMedia(url);
    const extension= (storagePath=='./songs')?'.mp3':'.jpg';
    const fileName = url.substring(url.lastIndexOf("/") + 1)+ extension;
    const filePath= path.join(storagePath,fileName)
    fs.writeFile(filePath, mediaData, (err) => {
        if (err) {
            console.error(`Error storing ${fileName}:`, err);
        } else {
            console.log(`Media file ${fileName} stored successfully.`);
        }
    });
}


// const src = `https://d1uzpajnrcv6ws.cloudfront.net/${stuff}`;


// async function fetchList() {
//     const list= await fetch("https://tunescape-test-backend.onrender.com/buffer-stream-to-fetch-song");
//     console.log(list)
//     return list;
// }

function writeDetail(song){
    const songObj = {
      title: `${song.Title}`,
      artist: `${song.Artist}`,
      songName: `${song.SongHash}.mp3`,
      imgName: `${song.ThumbnailHash}.jpg`,
    };

    const jsonData = JSON.stringify(songObj, null, 2) + ",\n";
    const filePath= './details.json';
    fs.appendFile(filePath, jsonData, (err) => {
      if (err) {
        console.error("Error writing JSON file:", err);
      } else {
        console.log(`JSON data stored successfully at ${filePath}.`);
      }
    });

}

async function drive(){

    songs.forEach(async (song)=>{

        let songURL = `https://d1uzpajnrcv6ws.cloudfront.net/${song.SongHash}`;
        let imgURL = `https://d1uzpajnrcv6ws.cloudfront.net/${song.ThumbnailHash}`;
        await downloadAndStoreMedia(songURL, './songs');
        await downloadAndStoreMedia(imgURL, './images');
        writeDetail(song);
    })
   
   
}

drive();

